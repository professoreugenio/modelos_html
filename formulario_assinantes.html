<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário Dinâmico</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .valor {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>

<body class="bg-light">

    <div class="container mt-5">
        <h1 class="mb-4">Formulário Dinâmico</h1>
        <form>
            <!-- Períodos -->
            <div class="mb-3">
                <label class="form-label">Período:</label>
                <div>
                    <input type="radio" id="periodo30" name="periodo" value="30" class="form-check-input">
                    <label for="periodo30" class="form-check-label">30 dias</label>
                    <input type="radio" id="periodo60" name="periodo" value="60" class="form-check-input ms-3" checked>
                    <label for="periodo60" class="form-check-label">60 dias</label>
                    <input type="radio" id="periodo90" name="periodo" value="90" class="form-check-input ms-3">
                    <label for="periodo90" class="form-check-label">90 dias</label>
                </div>
            </div>

            <!-- Data Início e Data Fim -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="dataInicio" class="form-label">Data Início:</label>
                    <input type="date" id="dataInicio" name="dataInicio" class="form-control">
                </div>
                <div class="col-md-6">
                    <label for="dataFim" class="form-label">Data Fim:</label>
                    <input type="date" id="dataFim" name="dataFim" class="form-control" readonly>
                </div>
            </div>

            <!-- Blocos -->
            <div class="mb-3">
                <label class="form-label">Selecione os blocos:</label>
                <div>
                    <input type="checkbox" id="bloco1" name="bloco1" class="form-check-input" checked>
                    <label for="bloco1" class="form-check-label">Bloco 1</label>
                    <input type="checkbox" id="bloco2" name="bloco2" class="form-check-input ms-3">
                    <label for="bloco2" class="form-check-label">Bloco 2</label>
                    <input type="checkbox" id="bloco3" name="bloco3" class="form-check-input ms-3">
                    <label for="bloco3" class="form-check-label">Bloco 3</label>
                    <input type="checkbox" id="bloco4" name="bloco4" class="form-check-input ms-3">
                    <label for="bloco4" class="form-check-label">Bloco 4</label>
                </div>
            </div>

            <!-- Valor Unitário e Valor Total -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="valorUnitario" class="form-label">Valor Unitário:</label>
                    <input type="text" id="valorUnitario" name="valorUnitario" class="form-control valor" readonly
                        value="R$ 40,00">
                </div>
                <div class="col-md-6">
                    <label for="valorTotal" class="form-label">Valor Total:</label>
                    <input type="text" id="valorTotal" name="valorTotal" class="form-control valor text-success"
                        readonly value="R$ 40,00">
                </div>
            </div>
        </form>
    </div>

    <script>
        // Referências dos elementos do formulário
        const valorUnitarioInput = document.getElementById('valorUnitario');
        const valorTotalInput = document.getElementById('valorTotal');
        const radios = document.querySelectorAll('input[name="periodo"]');
        const blocos = [
            document.querySelector('input[name="bloco1"]'),
            document.querySelector('input[name="bloco2"]'),
            document.querySelector('input[name="bloco3"]'),
            document.querySelector('input[name="bloco4"]')
        ];
        const dataInicioInput = document.getElementById('dataInicio');
        const dataFimInput = document.getElementById('dataFim');

        // Função para calcular e atualizar os valores
        function atualizarValorTotal() {
            const periodoSelecionado = parseInt(document.querySelector('input[name="periodo"]:checked').value, 10);

            // Definir o valor unitário com base no período
            const valorUnitario = periodoSelecionado === 30 ? 20 : (periodoSelecionado === 60 ? 40 : 60);
            valorUnitarioInput.value = `R$ ${valorUnitario},00`;

            // Calcular o total com base nos blocos selecionados
            const blocosMarcados = blocos.filter(bloco => bloco.checked).length;
            const valorTotal = blocosMarcados * valorUnitario;
            valorTotalInput.value = `R$ ${valorTotal},00`;

            // Atualizar a data de fim com base no período selecionado
            if (dataInicioInput.value) {
                const dataInicio = new Date(dataInicioInput.value);
                dataInicio.setDate(dataInicio.getDate() + periodoSelecionado);
                dataFimInput.value = dataInicio.toISOString().split('T')[0];
            }
        }

        // Atualizar valores ao alterar o período
        radios.forEach(radio => {
            radio.addEventListener('change', atualizarValorTotal);
        });

        // Atualizar valores ao marcar ou desmarcar blocos
        blocos.forEach(bloco => {
            bloco.addEventListener('change', atualizarValorTotal);
        });

        // Atualizar a data de fim ao alterar a data de início
        dataInicioInput.addEventListener('change', atualizarValorTotal);

        // Calcular o valor total no carregamento da página
        atualizarValorTotal();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>